C51 COMPILER V9.59.0.0   KEY_BOARD                                                         03/19/2019 19:30:16 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE KEY_BOARD
OBJECT MODULE PLACED IN .\Objects\key_board.obj
COMPILER INVOKED BY: E:\Programs\keil9\C51\BIN\C51.EXE key_board.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -istings\key_board.lst) TABS(2) OBJECT(.\Objects\key_board.obj)

line level    source

   1          #include"key_board.h"
   2          #include"C:\Users\CreaQi\OneDrive\文档\课程\单片机\uVision_Project\led显示字符\led_display.h"
   3          
   4          char get_key(){
   5   1        char row,col,ret;
   6   1        //使用P0-P3输出0
   7   1        P3=0xf0;
   8   1        if(P3!=0xf0){
   9   2        //消除抖动
  10   2        delay(93*150);
  11   2        //确实有键按下了
  12   2        if(P3!=0xF0){
  13   3          //行用做输入，列作为输出
  14   3          P3=0xf0;
  15   3          if(L1==0) col = 1;
  16   3          else if(L2==0) col = 2;
  17   3          else col = 3;
  18   3          //列作为输入，行输出
  19   3          P3 = 0x0f;
  20   3          if(R1==0) row =0;
  21   3          else if(R2==0) row =1;
  22   3          else if(R3==0) row =2;
  23   3          else row = 3; 
  24   3          
  25   3          ret = row*3+col;    
  26   3          //根据ret得到数字对应的字符串
  27   3          switch(ret){
  28   4            case 11:
  29   4              return '0';
  30   4            break;
  31   4            
  32   4            case 1:
  33   4              return '1';
  34   4            break;
  35   4            
  36   4            case 2:
  37   4              return '2';
  38   4            break;
  39   4            
  40   4            case 3:
  41   4              return '3';
  42   4            break;
  43   4            
  44   4            case 4:
  45   4              return '4';
  46   4            break;
  47   4            
  48   4            case 5:
  49   4              return '5';
  50   4            break;
  51   4            
  52   4            case 6:
  53   4              return '6';
  54   4            break;
C51 COMPILER V9.59.0.0   KEY_BOARD                                                         03/19/2019 19:30:16 PAGE 2   

  55   4            
  56   4            case 7:
  57   4              return '7';
  58   4            break;
  59   4            
  60   4            case 8:
  61   4              return '8';
  62   4            break;
  63   4            
  64   4            case 9:
  65   4              return '9';
  66   4            break;    
  67   4          }
  68   3        }
  69   2      }
  70   1        return -1;
  71   1        
  72   1        
  73   1      }
  74          
  75          /*void delay(int t){
  76            while(--t);
  77          }*/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    177    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
